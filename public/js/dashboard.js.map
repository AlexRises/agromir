{"version":3,"sources":["dashboard.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard.js","sourcesContent":["var sidebarIsOpened = false;\nvar popupEditIsOpened = false;\nvar popupAddIsOpened = false;\n\n// FUNCTION FOR REDIRECTING TO A PAGE\n// AFTER DELETING AN ITEM\nfunction redirect(to)\n{\n    location.href = to;\n}\n\n// SIDEBAR HANDLER\nfunction toggleSidebar() {\n    var sidebar = document.getElementById('sidebar');\n    sidebarIsOpened = !sidebarIsOpened;\n\n    if(sidebarIsOpened) {\n        sidebar.style.left = '0';\n    } else {\n        sidebar.style.left = '-500px';\n    }\n}\n\n// POPUP HANDLER FOR EDITING\nfunction togglePopupEdit() {\n    var popup = document.getElementById('popupEdit');\n    popupEditIsOpened = !popupEditIsOpened;\n\n    if(popupEditIsOpened) {\n        popup.style.display='flex';\n        popup.style.left='0';\n    } else {\n        popup.style.display='none';\n        popup.style.left='-5000px';\n    }\n}\n\n//POPUP HANDLER FOR ADDING\n\nfunction togglePopupAdd() {\n    var popup = document.getElementById('popupAdd');\n    popupAddIsOpened = !popupAddIsOpened;\n\n    if(popupAddIsOpened) {\n        popup.style.display='flex';\n        popup.style.left='0';\n    } else {\n        popup.style.display='none';\n        popup.style.left='-5000px';\n    }\n}\n\n// FUNCTIONS FOR EDITING AND DELETING\n\n// PAYMENTS\n// PAYMENTS EDITING\nfunction editPayment() {\n    event.preventDefault();\n\n    var id = this.id;\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/payments/'+id,\n        data: {id: id},\n        success: function( response ) {\n            $('#popup-heading-edit').text('Редактироване платежа #'+response.id);\n            $('#amount-edit').val(response.amount);\n            $('#date-edit').val(response.date);\n            $('#type-edit').val(response.type);\n            $('.popup-form').attr('action', '/payments/'+response.id+'/edit');\n        }\n    });\n}\n\n// DELETING PAYMENT\n\nfunction deletePayment() {\n    var id = this.id;\n    var token = $(this).data('token');\n    var row = $('li.'+id);\n\n    var result = confirm(\"Удалить?\");\n    if (result) {\n        $.ajaxSetup({\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n        $.ajax({\n            dataType: 'json',\n            type: \"delete\",\n            url: '/payments/' + id,\n            data: {_token: token, id: id, _method:'delete'},\n            success: function (response) {\n\n                row.css('background-color', 'lightcoral');\n                row.fadeOut(1000);\n\n                setInterval(function () {\n                    redirect('payments');\n                }, 500);\n            }\n        });\n    }\n}\n\n// STAFF\n\n// ACTIVATING STAFF\n\nfunction activateStaff() {\n    event.preventDefault();\n    var row = this;\n    var id = this.id;\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/staff/'+id+'/activate',\n        data: {id: id},\n        success: function( response ) {\n\n            var messages = document.getElementById('messages');\n            messages.insertAdjacentHTML('beforeend',\n                ' <div class=\"alert-success message-alert\" role=\"alert\">\\n' +\n                'Стафф #' + response.id + ' активирован' + '</div>');\n\n            $(row).parent().css('background-color', 'lightcoral');\n            $(row).parent().fadeOut(1000);\n            setInterval(function(){\n                redirect('staff');\n            }, 500);\n\n        }\n    });\n}\n\n// EDITING STAFF\n\nfunction editStaff() {\n    event.preventDefault();\n    var id = this.id;\n    var status = 'Активен';\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/staff/'+id,\n        data: {id: id},\n        success: function( response ) {\n\n            $('#name-edit').val(response.name);\n            $('#surname-edit').val(response.surname);\n            $('#address-edit').val(response.address);\n            $('#salary-edit').val(response.salary);\n            $('#phone-edit').val(response.phone);\n            $('#position-edit').val(response.position);\n\n            if(response.activated)\n            {\n                status = 'true';\n                $('#activated-edit').val(status);\n            } else {\n                status = 'false';\n                $('#activated-edit').val(status);\n            }\n\n            $('.popup-form').attr('action', '/profile/'+response.id+'/edit');\n        }\n    });\n}\n\n// INGREDIENTS\n// EDIT\n\nfunction editIngredient() {\n    event.preventDefault();\n    var id = this.id;\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/ingredients/'+id,\n        data: {id: id},\n        success: function( response ) {\n\n            $('#popup-heading-edit').text('Редактироване ингредиента #'+response.id);\n            $('#price-edit').val(response.price);\n            $('#amountperpack-edit').val(response.amountperpack);\n            $('#title-edit').val(response.title);\n            $('#description-edit').val(response.description);\n            $('.popup-form').attr('action', '/ingredients/'+response.id+'/edit');\n\n        }\n    });\n}\n\n// DELETE\n\nfunction deleteIngredient() {\n    var id = this.id;\n    var token = $(this).data('token');\n    var row = $('li.'+id);\n    var result = confirm(\"Удалить?\");\n    if (result) {\n        $.ajaxSetup({\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n        $.ajax({\n            dataType: 'json',\n            type: \"delete\",\n            url: '/ingredients/' + id,\n            data: {\n                _method: 'delete',\n                _token: token,\n                id: id\n            },\n            success: function (response) {\n\n                row.css('background-color', 'lightcoral');\n                row.fadeOut(1000);\n                setInterval(function () {\n                    redirect('ingredients');\n                }, 500);\n\n\n            }\n        });\n    }\n}\n\n// PRODUCTS\n// EDIT\n\nfunction editProduct() {\n    event.preventDefault();\n    var token = $(this).data('token');\n    var id = this.id;\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/products/'+id,\n        data: {id: id,  _token: token},\n        success: function( response ) {\n\n            $('#popup-heading-edit').text('Редактироване продукта #'+response.id);\n            $('#price-edit').val(response.price);\n            $('#title-edit').val(response.title);\n            $('#description-edit').val(response.description);\n            $('.popup-form').attr('action', '/products/'+response.id+'/edit');\n\n            console.log(response.ingredients);\n\n            var inputs = document.getElementsByClassName('ingredient-input');\n\n            [].forEach.call(inputs, function(item, i, arr) {\n                if(response.ingredients.includes(item.id)) {\n                    item.checked = true;\n                }\n\n            });\n\n        }\n    });\n}\n\n// DELETE\n\nfunction deleteProduct() {\n    var id = this.id;\n    var token = $(this).data('token');\n    var row = $('li.'+id);\n\n    var result = confirm(\"Удалить?\");\n    if (result) {\n        $.ajaxSetup({\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n        $.ajax({\n            dataType: 'json',\n            type: \"delete\",\n            url: '/products/' + id,\n            data: {_token: token, id: id, _method: 'delete'},\n            success: function (response) {\n\n                row.css('background-color', 'lightcoral');\n                row.fadeOut(1000);\n\n                setInterval(function () {\n                    redirect('products');\n                }, 500);\n\n\n            }\n        });\n    }\n}\n\n// SHIFTS\n// EDIT\n\nfunction editShift() {\n    event.preventDefault();\n    var id = this.id;\n    $.ajaxSetup({\n        headers: {\n            'Content-Type':'application/json',\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $.ajax({\n        dataType: 'json',\n        type: \"POST\",\n        url: '/shifts/'+id,\n        data: {id: id},\n        success: function( response ) {\n\n            $('#popup-heading-edit').text('Редактироване дня #'+response.id);\n\n            $('#date-edit').val(response.date);\n            $('#finishing_at-edit').val(response.finishing_at);\n            $('#starting_at-edit').val(response.starting_at);\n            $('#description-edit').val(response.description);\n\n            $('.popup-form').attr('action', '/shifts/'+response.id+'/edit');\n\n            var options = $('.staff-fullname').toArray();\n\n            options.forEach(function(item, i, arr) {\n                if(item.innerHTML === response.staff_fullname)\n                {\n                    $('#staff_id-edit').val(response.staff_id).change();\n                }\n            });\n        }\n    });\n}\n\n// AJAX FOR \"ON THE FLY\" EDITING & DELETING\n$(document).ready(function() {\n\n    $('.table-edit-payments').on('click', editPayment);\n\n    $('.table-delete-payments').on('click', deletePayment);\n\n    $('.table-edit-staff').on('click', editStaff);\n\n    $('.table-edit-ingredients').on('click', editIngredient);\n\n    $('.table-delete-ingredients').on('click', deleteIngredient);\n\n    $('.table-edit-products').on('click', editProduct);\n\n    $('.table-delete-products').on('click', deleteProduct);\n\n    $('.table-edit-shifts').on('click', editShift);\n\n    $('.profile-activator').on('click', activateStaff);\n\n});\n\n//# sourceMappingURL=dashboard.js.map\n"]}